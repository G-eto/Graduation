<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" class="no-js">
<head>
    <meta http-equiv="Content-Type" content="text/html" ; charset="UTF-8">
    <script type="text/javascript" src="../js/jquery-3.4.1.min.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>个人首页</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="../vendor/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
          integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <!-- Google fonts - Popppins for copy-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,800">
    <!-- orion icons-->
    <link rel="stylesheet" href="../css/orionicons.css">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="../css/style.default.css" id="theme-stylesheet">
    <!-- <link rel="stylesheet" href="../css/style.css"> -->
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="../css/custom.css">
    <!-- Favicon-->
    <link rel="shortcut icon" href="../images/favicon.png?3">
    <!-- Tweaks for older IEs--><!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>
<body>
<!-- navbar-->
<header class="header">
    <nav class="navbar navbar-expand-lg px-4 py-2 bg-white shadow"><a href="#"
                                                                      class="sidebar-toggler text-gray-500 mr-4 mr-lg-5 lead"><i
            class="fas fa-align-left"></i></a>
        <div class="navbar-brand font-weight-bold text-uppercase text-base">

            <!--            <a href="../index">Home</a>&nbsp;
                        <a href="../jobs">Jobs</a>&nbsp;
                        <a href="../tools/visitor" target="_blank">Tools</a>&nbsp;
                        <a href="../about">About</a>-->
        </div>

        <ul class="ml-auto d-flex align-items-center list-unstyled mb-0">
            <li class="nav-item dropdown mr-3" hidden=""><a id="notifications" href="http://example.com"
                                                            data-toggle="dropdown" aria-haspopup="true"
                                                            aria-expanded="false"
                                                            class="nav-link dropdown-toggle text-gray-400 px-1"><i
                    class="fa fa-bell"></i><span class="notification-icon"></span></a>
                <div aria-labelledby="notifications" class="dropdown-menu"><a href="#" class="dropdown-item">
                    <div class="d-flex align-items-center">
                        <div class="icon icon-sm bg-violet text-white"><i class="fab fa-twitter"></i></div>
                        <div class="text ml-2">
                            <p class="mb-0">You have 2 followers</p>
                        </div>
                    </div>
                </a><a href="#" class="dropdown-item">
                    <div class="d-flex align-items-center">
                        <div class="icon icon-sm bg-green text-white"><i class="fas fa-envelope"></i></div>
                        <div class="text ml-2">
                            <p class="mb-0">You have 6 new messages</p>
                        </div>
                    </div>
                </a><a href="#" class="dropdown-item">
                    <div class="d-flex align-items-center">
                        <div class="icon icon-sm bg-blue text-white"><i class="fas fa-upload"></i></div>
                        <div class="text ml-2">
                            <p class="mb-0">Server rebooted</p>
                        </div>
                    </div>
                </a><a href="#" class="dropdown-item">
                    <div class="d-flex align-items-center">
                        <div class="icon icon-sm bg-violet text-white"><i class="fab fa-twitter"></i></div>
                        <div class="text ml-2">
                            <p class="mb-0">You have 2 followers</p>
                        </div>
                    </div>
                </a>
                    <div class="dropdown-divider"></div>
                    <a href="#" class="dropdown-item text-center"><small
                            class="font-weight-bold headings-font-family text-uppercase">View all notifications</small></a>
                </div>
            </li>
            <li class="nav-item dropdown ml-auto"><a id="userInfo" href="http://example.com" data-toggle="dropdown"
                                                     aria-haspopup="true" aria-expanded="false"
                                                     class="nav-link dropdown-toggle">
                <img th:src="${(user.getUser().getPicPath() == null || user.getUser().getPicPath().equals('')) ? '../images/employers/img-1.jpg': '/import/'+user.getUser().getPicPath()}"
                     alt="Jason Doe"
                     style="max-width: 2.5rem;"
                     class="img-fluid rounded-circle shadow"></a>
                <div aria-labelledby="userInfo" class="dropdown-menu">
                    <a href="#" class="dropdown-item"><strong class="d-block text-uppercase headings-font-family">Mark
                        Stephen</strong><small>Web Developer</small></a>
                    <div class="dropdown-divider"></div>
                    <a href="./changePsw" class="dropdown-item">修改密码</a>
                    <a href="./logout" class="dropdown-item">Logout</a>
                </div>
            </li>
        </ul>
    </nav>
</header>
<div class="d-flex align-items-stretch">
    <div id="sidebar" class="sidebar py-3">
        <div class="text-gray-400 text-uppercase px-3 px-lg-4 py-4 font-weight-bold small headings-font-family">欢迎大佬
        </div>
        <ul class="sidebar-menu list-unstyled">
            <li class="sidebar-list-item"><a href="./analysis" class="sidebar-link text-muted active"><i
                    class="o-exit-1 mr-3 text-gray"></i><span>数据统计</span></a></li>
            <li class="sidebar-list-item"><a href="./articles" class="sidebar-link text-muted"><i
                    class="o-exit-1 mr-3 text-gray"></i><span>期刊论文</span></a></li>
            <li class="sidebar-list-item"><a href="./papers" class="sidebar-link text-muted"><i
                    class="o-exit-1 mr-3 text-gray"></i><span>会议论文</span></a></li>
            <li class="sidebar-list-item"><a href="./projects" class="sidebar-link text-muted"><i
                    class="o-exit-1 mr-3 text-gray"></i><span>主持项目</span></a></li>
            <li class="sidebar-list-item"><a href="./patents" class="sidebar-link text-muted"><i
                    class="o-exit-1 mr-3 text-gray"></i><span>发明专利</span></a></li>
            <li class="sidebar-list-item">
                <a href="#" data-toggle="collapse" data-target="#pages" aria-expanded="false" aria-controls="pages"
                   class="sidebar-link text-muted">
                    <i class="o-wireframe-1 mr-3 text-gray"></i><span>待确认数据</span>
                </a>
                <div id="pages" class="collapse">
                    <ul class="sidebar-menu list-unstyled border-left border-primary border-thick">
                        <li class="sidebar-list-item"><a href="./articles_check"
                                                         class="sidebar-link text-muted pl-lg-5">期刊论文</a></li>
                        <li class="sidebar-list-item"><a href="./projects_check"
                                                         class="sidebar-link text-muted pl-lg-5">主持项目</a></li>
                        <li class="sidebar-list-item" hidden><a href=""
                                                                class="sidebar-link text-muted pl-lg-5">会议论文</a></li>
                        <li class="sidebar-list-item" hidden><a href=""
                                                                class="sidebar-link text-muted pl-lg-5">发明专利</a></li>
                    </ul>
                </div>
            </li>
            <li class="sidebar-list-item"><a href="./information" class="sidebar-link text-muted"><i
                    class="o-exit-1 mr-3 text-gray"></i><span>个人信息</span></a></li>
        </ul>
    </div>
    <div class="page-holder w-100 d-flex flex-wrap">
        <div class="container-fluid px-xl-5">
            <section class="py-5">
                <div class="row">
                    <div class="col-xl-3 col-lg-6 mb-4 mb-xl-0">
                        <div class="bg-white shadow roundy p-4 h-100 d-flex align-items-center justify-content-between">
                            <div class="flex-grow-1 d-flex align-items-center">
                                <div class="dot mr-3 bg-violet"></div>
                                <div class="text">
                                    <h5 class="mb-0">期刊论文</h5>
                                    <span class="text-gray" th:text="${analysis.getArticle()}">145,14 GB</span>
                                </div>
                            </div>
                            <div class="icon text-white bg-violet"><i class="fas fa-server"></i></div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-6 mb-4 mb-xl-0">
                        <div class="bg-white shadow roundy p-4 h-100 d-flex align-items-center justify-content-between">
                            <div class="flex-grow-1 d-flex align-items-center">
                                <div class="dot mr-3 bg-green"></div>
                                <div class="text">
                                    <h5 class="mb-0">会议论文</h5>
                                    <span class="text-gray" th:text="${analysis.getPaper()}">32</span>
                                </div>
                            </div>
                            <div class="icon text-white bg-green"><i class="far fa-clipboard"></i></div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-6 mb-4 mb-xl-0">
                        <div class="bg-white shadow roundy p-4 h-100 d-flex align-items-center justify-content-between">
                            <div class="flex-grow-1 d-flex align-items-center">
                                <div class="dot mr-3 bg-blue"></div>
                                <div class="text">
                                    <h5 class="mb-0">发明专利</h5>
                                    <span class="text-gray" th:text="${analysis.getPatent()}">400</span>
                                </div>
                            </div>
                            <div class="icon text-white bg-blue"><i class="fa fa-dolly-flatbed"></i></div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-6 mb-4 mb-xl-0">
                        <div class="bg-white shadow roundy p-4 h-100 d-flex align-items-center justify-content-between">
                            <div class="flex-grow-1 d-flex align-items-center">
                                <div class="dot mr-3 bg-red"></div>
                                <div class="text">
                                    <h5 class="mb-0">主持项目</h5>
                                    <span class="text-gray" th:text="${analysis.getProject()}">123</span>
                                </div>
                            </div>
                            <div class="icon text-white bg-red"><i class="fas fa-receipt"></i></div>
                        </div>
                    </div>
                </div>
            </section>
            <section>
                <div class="row">
                    <div class="col-lg-8">
                        <div class="card mb-5 mb-lg-0">
                            <div class="card-header">
                                <h2 class="h5 mb-0 text-uppercase">期刊论文年度统计</h2>
                            </div>
                            <div class="card-body">
                                <p class="text-gray mb-5">每年期刊论文发表情况</p>
                                <div class="chart-holder mt-5 mb-5">
                                    <canvas id="lineChartExample"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="bg-white shadow roundy px-4 py-3 d-flex align-items-center justify-content-between mb-4">
                            <div class="flex-grow-1 d-flex align-items-center">
                                <div class="dot mr-3 bg-violet"></div>
                                <div class="text">
                                    <h5 class="mb-0" th:text="${'核心集被引次数:'+analysis.getReporter().getSciCitation()}"></h5>
<!--                                    <span class="text-gray" th:text="${analysis.getReporter().getSciCitation()}"></span>-->
                                </div>
                            </div>
                            <div class="icon bg-violet text-white"><i class="fas fa-clipboard-check"></i></div>
                        </div>
                        <div class="bg-white shadow roundy px-4 py-3 d-flex align-items-center justify-content-between mb-4">
                            <div class="flex-grow-1 d-flex align-items-center">
                                <div class="dot mr-3 bg-green"></div>
                                <div class="text">
                                    <h5 class="mb-0" th:text="${'JCR-1/2篇数:'+analysis.getReporter().getJcr()}"></h5>
<!--                                    <span class="text-gray" th:text="${analysis.getReporter().getJcr()}"></span>-->
                                </div>
                            </div>
                            <div class="icon bg-green text-white"><i class="fas fa-dollar-sign"></i></div>
                        </div>
                        <div class="bg-white shadow roundy px-4 py-3 d-flex align-items-center justify-content-between mb-4">
                            <div class="flex-grow-1 d-flex align-items-center">
                                <div class="dot mr-3 bg-green"></div>
                                <div class="text">
                                    <h5 class="mb-0" th:text="${'ESI高被引论文:'+analysis.getReporter().getEsi()}"></h5>
<!--                                    <span class="text-gray" th:text="${analysis.getReporter().getEsi()}"></span>-->
                                </div>
                            </div>
                            <div class="icon bg-green text-white"><i class="fas fa-dollar-sign"></i></div>
                        </div>
                        <div class="bg-white shadow roundy px-4 py-3 d-flex align-items-center justify-content-between mb-4">
                            <div class="flex-grow-1 d-flex align-items-center">
                                <div class="dot mr-3 bg-blue"></div>
                                <div class="text">
                                    <h5 class="mb-0"th:text="${'主持项目总金额:'+analysis.getFunds()+'w'}"></h5>
<!--                                    <span class="text-gray" th:text="${analysis.getFunds()+'万元'}"></span>-->
                                </div>
                            </div>
                            <div class="icon bg-blue text-white"><i class="fas fa-user-friends"></i></div>
                        </div>
                        <div class="card px-5 py-4">
                            <h2 class="mb-0 d-flex align-items-center">
                                <span th:text="${analysis.getReporter().getScore()}"></span>
                                <span class="dot bg-red d-inline-block ml-3"></span>
                            </h2><span class="text-muted">综合指标</span>
                        </div>
                    </div>
                </div>
            </section>
            <section class="py-5">
                <div class="row">
                    <br>
                </div>
            </section>
        </div>
    </div>
</div>

<!-- <hr> -->
<footer class="footer footer-bar">
    <div class="container text-center">
        <div class="row justify-content-center">
            <div class="col-12">
                <div class="footer-link">
                    <a href="http://www.buct.edu.cn">BUCT</a>&nbsp;&nbsp;|&nbsp;&nbsp;
                    <a href="http://jwgl.buct.edu.cn/">教务管理系统</a>&nbsp;&nbsp;|&nbsp;&nbsp;
                    <a href="http://tree.buct.edu.cn/">校园网</a>&nbsp;&nbsp;|&nbsp;&nbsp;
                    <a href="https://www.zizhu.buct.edu.cn/1221/list.htm">北化资助中心</a>&nbsp;&nbsp;|&nbsp;&nbsp;
                    <a href="https://w.buct.edu.cn">BUCT-VPN</a>
                </div>
                <div class="">
                    <p class="mb-0">Copyright &copy; 2020.Company name All rights reserved.
                        <a target="_blank" href="#">基于网络爬虫的高校学院级科研评价实践设计</a>
                    </p>
                </div>
            </div>
        </div>
    </div><!--end container-->
</footer><!--end footer-->
<!-- Footer End -->

<!-- Back to top -->
<a href="#" class="back-to-top rounded text-center" id="back-to-top">
    <i class="mdi mdi-chevron-up d-block"> </i>
</a>
<!-- JavaScript files-->
<script src="../vendor/jquery/jquery.min.js"></script>
<script src="../vendor/popper.js/umd/popper.min.js"> </script>
<script src="../vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="../vendor/jquery.cookie/jquery.cookie.js"> </script>
<script src="../vendor/chart.js/Chart.min.js"></script>
<script src="../js/js.cookie.min.js"></script>
<script src="../js/charts-home.js"></script>
<script src="../js/front.js"></script>
<!--    <script src="../js/charts-teacher.js"></script>-->
  <script th:inline="javascript">
// <script>
    var ctx1 = $("canvas").get(0).getContext("2d");
    var gradient1 = ctx1.createLinearGradient(150, 0, 150, 300);
    gradient1.addColorStop(0, 'rgba(210, 114, 181, 0.91)');
    gradient1.addColorStop(1, 'rgba(177, 62, 162, 0)');

    var receiveYear = [];
    var receiveCitation = [];
    var receiveArticle = [];
    var max = 0;
    var message = [[${analysis.analysisYears}]];
    for(var i = 0; i < message.length; i++){
        receiveYear[i] = message[i]['year'];
        receiveCitation[i] = message[i]['citation'];
        receiveArticle[i] = message[i]['number'];
        if(max < message[i]['number']){
            max = message[i]['number'] + 5;
        }
    }
    console.log(receiveCitation);
    var LINECHARTEXMPLE   = $('#lineChartExample');
    var lineChartExample = new Chart(LINECHARTEXMPLE, {
        type: 'line',
        options: {
            legend: {labels:{fontColor:"#777", fontSize: 12}},
            scales: {
                xAxes: [{
                    display: true,
                    gridLines: {
                        color: '#fff'
                    }
                }],
                yAxes: [{
                    display: true,
                    ticks: {
                        max: max,
                        min: 0
                    },
                    gridLines: {
                        color: '#fff'
                    }
                }]
            },
        },
        data: {
            labels: receiveYear,
            datasets: [
                {
                    label: "发表期刊论文",
                    fill: true,
                    lineTension: 0.3,
                    backgroundColor: gradient1,
                    borderColor: 'rgba(210, 114, 181, 0.91)',
                    borderCapStyle: 'butt',
                    borderDash: [],
                    borderDashOffset: 0.0,
                    borderJoinStyle: 'miter',
                    borderWidth: 2,
                    pointBorderColor: gradient1,
                    pointBackgroundColor: "#fff",
                    pointBorderWidth: 2,
                    pointHoverRadius: 5,
                    pointHoverBackgroundColor: gradient1,
                    pointHoverBorderColor: "rgba(220,220,220,1)",
                    pointHoverBorderWidth: 2,
                    pointRadius: 1,
                    pointHitRadius: 10,
                    data: receiveArticle,
                    spanGaps: false
                }
            ]
        }
    });
</script>
</body>
</html>